docker-compose:
  generator: generic
  files:
    - ../docker-compose-beyla-gotestserver.yml
input:
  - path: /sqltest
interval: 500ms
expected:
  traces:
    - traceql: '{ .db.operation = "SELECT" }'
      spans:
        - name: 'SELECT .students'
          attributes:
            db.operation: SELECT
            db.sql.table: students
  metrics:
    - promql: 'sql_client_duration_buckets{le="0"}'
      value: "= 0"
    - promql: 'sql_client_duration_buckets{le="10"}'
      value: "> 0"
    - promql: 'sql_client_duration_count'
      value: "> 0"
    - promql: 'sql_client_duration_sum'
      value: "> 0"